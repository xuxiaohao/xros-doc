# DNS 协议及完整的查询过程

DNS，全称为"Domain Name System"，DNS 解析过程描述了如何将一个域名转换成相应的 IP 地址。

![](/images/net/dns.png)

- 首先会检查自己的本地 DNS 缓存，看看是否之前已经解析过这个域名。如果有，它会直接使用缓存的 IP 地址。 （DNS 解析缓存/本地 host 文件）
- 若本地缓存中没有域名的解析结果，你的计算机会向本地 DNS 服务器发送一个 DNS 查询请求。通常，这个本地 DNS 服务器由你的互联网服务提供商（ISP）分配。（也可以手动配置）
- 本地 DNS 服务器会首先检查它的缓存，如果它之前已经解析过该域名，它会直接返回 IP 地址给你的计算机。
- 本地 DNS 服务器的缓存中没有这个域名的解析结果，则启动一个 DNS 递归查询过程。
- 本地 DNS 服务器首先向根 DNS 服务器查询，根 DNS 服务器告诉本地 DNS 服务器哪个顶级域的 DNS 服务器负责这个域名。 (告诉本地 DNS 服务器到".com"顶级域的 DNS)
- 本地 DNS 服务器然后向".com"顶级域的 DNS 服务器查询，获取到".baidu.com"子域的 DNS 服务器地址。
- 本地 DNS 服务器接着查询".baidu.com"子域的 DNS 服务器，获得最终的"www.baidu.com"域名的IP地址。
- 本地 DNS 服务器将这个 IP 地址返回给你的计算机，并且还将结果保存在本地缓存中。
- 获取到"www.baidu.com"对应的IP地址，它可以向该IP地址的服务器发起HTTP请求，获取访问网站内容。