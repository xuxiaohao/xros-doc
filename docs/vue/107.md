# 双向绑定的实现原理

## 1.1 概念
在 Vue.js 中，双向数据绑定（也称为双向绑定或双向同步）是一个核心概念，它允许视图（View）和模型（Model）之间的数据保持同步。当模型的数据发生变化时，视图会自动更新以反映这些变化；同样地，当用户在视图中进行某些操作（如输入文本）时，模型的数据也会自动更新以反映这些更改。

## 1.2 表单元素中的v-model

内部会根据标签的不同解析出不同的语法。并且这里有“额外”的处理逻辑

- 例如 文本框会被解析成 value + input 事件 (同时处理中文输入问题)
- 例如 复选框会被解析成 checked + change 事件
- ...

<Bookmark>[v-model源码](https://github1s.com/vuejs/core/blob/HEAD/packages/runtime-dom/src/directives/vModel.ts#L45-L46)</Bookmark>

## 1.3 自定义组件中的v-model

组件上的 `v-model` 默认会利用名为 `value` 的 prop 和名为 `input` 的事件。对于组件而言 v-model 就是 value + input 的语法糖。可用于组件中数据的双向绑定。

Vue2 中 `v-model` 名字可以修改：
```js
Vue.component("base-checkbox", {
  model: {
    prop: "checked",
    event: "change",
  },
  props: {
    checked: Boolean,
  },
  template: `
    <input
      type="checkbox"
      v-bind:checked="checked"
      v-on:change="$emit('change', $event.target.checked)"
    >
  `,
});
```

vue3支持多个 `v-model` 绑定

```vue
<my v-model:a="a" v-model:b="b" v-model:c="c"></my>
```